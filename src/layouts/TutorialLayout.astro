---
import Layout from './Layout.astro';

const { titulo, contenido, description, slug, categoria } = Astro.props;

const pageTitle = `${titulo} | BearStips`;
const canonical = `https://bearstips.com/es/tutorial/${categoria}/${slug}`;
---

<Layout
  title={pageTitle}
  description={description}
  canonical={canonical}
>
  <main>
    <article class="tutorial">
      <h1>{titulo}</h1>
      <div class="contenido-tutorial" set:html={contenido}></div>
    </article>
  </main>
</Layout>

<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
}

main {
  max-width: 800px;
  margin: 20px auto;
  padding: 0 20px;
}
pre {
  position: relative;
  background: #1e1e1e;
  color: #f8f8f2;
  padding: 18px;
  padding-top: 45px;
  border-radius: 10px;
  overflow-x: auto;
  font-size: 14px;
  line-height: 1.6;
}

.copy-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: #2d2d2d;
  color: #fff;
  border: none;
  padding: 6px 10px;
  font-size: 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.2s ease;
}

.copy-btn:hover {
  background: #444;
}

.copy-btn.copied {
  background: #16a34a;
}

pre code {
  font-family: Consolas, Monaco, monospace;
}

h1 {
  font-size: 2.5rem;
}

/* TODO tu CSS exactamente igual debajo */
</style>

<script is:inline>
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll('pre').forEach(function(pre) {
      const btn = document.createElement('button');
      btn.innerText = 'Copiar';
      btn.className = 'copy-btn';

      btn.addEventListener('click', function() {
        const code = pre.querySelector('code') 
          ? pre.querySelector('code').innerText 
          : pre.innerText;

        navigator.clipboard.writeText(code).then(function() {
          btn.innerText = 'Â¡Copiado!';
          btn.classList.add('copied');
          setTimeout(function() {
            btn.innerText = 'Copiar';
            btn.classList.remove('copied');
          }, 2000);
        });
      });

      pre.appendChild(btn);
    });
  });
</script>